language: rust
rust: nightly
script: make test

cache:
  - cargo
  - directories: bin

services:
  - postgresql

env:
  global:
    - DATABASE_URL="postgres://postgres@localhost:5432/meals"
    - ROCKET_DATABASES="{ meals = { url = \"$DATABASE_URL\" } }"

before_script:
  - psql -c 'create database meals;' -U postgres